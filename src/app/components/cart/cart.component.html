<div class="container">
  <div class="cart-header">
    <h2>Shopping Cart</h2>
    <p *ngIf="cartItems.length > 0">{{cartItems.length}} items in your cart</p>
  </div>

  <div *ngIf="cartItems.length === 0" class="empty-cart">
    <div class="empty-icon">üõí</div>
    <h3>Your cart is empty</h3>
    <p>Add some products to get started!</p>
    <a routerLink="/home" class="btn primary">Continue Shopping</a>
  </div>

  <div *ngIf="cartItems.length > 0" class="cart-content">
    <div class="cart-items">
      <div *ngFor="let item of cartItems" class="cart-item">
        <div class="item-image">
          <img [src]="item.product.images[0]" [alt]="item.product.name">
        </div>
        
        <div class="item-details">
          <h4>{{item.product.name}}</h4>
          <p class="item-description">{{item.product.description}}</p>
          <div class="item-price">‚Çπ{{item.product.price}}</div>
        </div>
        
        <div class="item-controls">
          <div class="quantity-controls">
            <button (click)="updateQuantity(item.id, item.quantity - 1)" class="qty-btn">-</button>
            <span class="quantity">{{item.quantity}}</span>
            <button (click)="updateQuantity(item.id, item.quantity + 1)" class="qty-btn">+</button>
          </div>
          <div class="item-total">‚Çπ{{item.product.price * item.quantity}}</div>
          <button (click)="removeItem(item.id)" class="remove-btn">üóëÔ∏è</button>
        </div>
      </div>
    </div>

    <div class="cart-summary">
      <div class="summary-card">
        <h3>Order Summary</h3>
        <div class="summary-row">
          <span>Subtotal:</span>
          <span>‚Çπ{{getTotal()}}</span>
        </div>
        <div class="summary-row">
          <span>Shipping:</span>
          <span class="free">Free</span>
        </div>
        <div class="summary-row total">
          <span>Total:</span>
          <span>‚Çπ{{getTotal()}}</span>
        </div>
        <button (click)="proceedToCheckout()" class="btn primary btn-lg checkout-btn">
          <span>üöÄ</span>
          Proceed to Checkout
        </button>
        <a routerLink="/home" class="continue-shopping">Continue Shopping</a>
      </div>
    </div>
  </div>
</div>

<!-- Checkout Modal -->
<div *ngIf="showCheckoutModal" class="modal">
  <div class="modal-content checkout-modal">
    <div class="modal-header">
      <h3>Checkout</h3>
      <button class="close-btn" (click)="closeCheckoutModal()">‚úï</button>
    </div>
    
    <div class="checkout-summary">
      <h4>Order Items</h4>
      <div *ngFor="let item of cartItems" class="checkout-item">
        <img [src]="item.product.images[0]" [alt]="item.product.name">
        <div class="item-info">
          <h5>{{item.product.name}}</h5>
          <p>Qty: {{item.quantity}} √ó ‚Çπ{{item.product.price}}</p>
        </div>
        <div class="item-price">‚Çπ{{item.product.price * item.quantity}}</div>
      </div>
      <div class="checkout-total">
        <strong>Total: ‚Çπ{{getTotal()}}</strong>
      </div>
    </div>
    
    <div class="delivery-address">
      <h4>Delivery Address</h4>
      <div class="address-card">
        <div class="address-icon">üìç</div>
        <div class="address-details">
          <p>{{currentUser?.name}}</p>
          <p>{{currentUser?.address}}</p>
          <p>Phone: {{currentUser?.phone}}</p>
        </div>
      </div>
    </div>
    
    <div class="payment-options">
      <h4>Payment Method</h4>
      <div class="payment-option disabled">
        <input type="radio" value="upi" [(ngModel)]="paymentMethod" disabled id="checkout-upi">
        <label for="checkout-upi" class="payment-label">
          <div class="payment-icon">üí≥</div>
          <div class="payment-info">
            <h5>UPI Payment</h5>
            <p>Currently Unavailable</p>
          </div>
        </label>
      </div>
      
      <div class="payment-option">
        <input type="radio" value="cod" [(ngModel)]="paymentMethod" id="checkout-cod">
        <label for="checkout-cod" class="payment-label">
          <div class="payment-icon">üí∞</div>
          <div class="payment-info">
            <h5>Cash on Delivery</h5>
            <p>Pay when you receive</p>
          </div>
        </label>
      </div>
    </div>
    
    <div class="modal-actions">
      <button class="btn secondary" (click)="closeCheckoutModal()">Cancel</button>
      <button class="btn primary" (click)="placeOrder()" [disabled]="!paymentMethod">
        <span>üì¶</span>
        Place Order
      </button>
    </div>
  </div>
</div>